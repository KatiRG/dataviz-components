!function(a){var b={margin:{top:10,right:10,bottom:30,left:50},aspectRatio:16/9,x:{ticks:5,getDomain:function(a){return d3.extent(a,this.x.getValue.bind(this))},getRange:function(){return[0,this.innerWidth]}},y:{ticks:10},width:600};this.lineChart=function(c,d){var e,f,g,h,i=a(!0,{},b,d),j=i.width,k=Math.ceil(j/i.aspectRatio),l=i.innerHeight=k-i.margin.top-i.margin.bottom,m=i.innerWidth=j-i.margin.left-i.margin.right,n=c.select("g"),o=d3.line().x(function(a){return e(i.x.getValue.call(i,a))}).y(function(a){return f(i.y.getValue.call(i,a))}),p=d3.transition().duration(1e3),q=function(){var a,b,c=this.settings,d=c.filterData&&"function"==typeof c.filterData?c.filterData.call(c,c.data):c.data,h=void 0!==c.showLabels?c.showLabels:d.length>1,j=n.select(".x.axis"),k=n.select(".y.axis"),q=n.select(".data"),r=m,s=function(a){var b=i.z.getDataPoints(a);return f(i.y.getValue.call(c,b[b.length-1]))},t=function(a,b){var d="dline dline"+(b+1);return c.z&&c.z.getClass&&"function"==typeof c.z.getClass&&(d+=" "+c.z.getClass.call(c,a)),d},u=function(a){return o(c.z.getDataPoints.call(c,a))},v=[].concat.apply([],d.map(function(a){return c.z.getDataPoints.call(c,a)}));e=g.x=function(){switch(c.x.type){case"linear":return d3.scaleLinear();case"ordinal":return d3.scaleOrdinal();default:return d3.scaleTime()}}().range(c.x.getRange.call(c,v)),f=g.y=d3.scaleLinear().range([l,0]),e.domain(c.x.getDomain.call(c,v)),f.domain([0,d3.max(v,c.y.getValue.bind(c))]),q.empty()&&(q=n.append("g").attr("class","data")),a=q.selectAll(".dline").data(d,c.z.getId.bind(c)),a.enter().append("path").attr("class",t).attr("fill","none").attr("d",u),a.transition(p).attr("d",u),a.exit().remove(),b=q.selectAll(".label").data(function(){return"function"==typeof h?d.filter(h.bind(c)):!1===h?[]:d}(),c.z.getId.bind(c)),b.enter().append("text").text(c.z.getText.bind(c)).attr("aria-hidden","true").attr("class","label").attr("fill","#000").attr("x",r).attr("y",s).attr("text-anchor","end"),b.transition(p).attr("y",s),b.exit().remove(),j.empty()&&(j=n.append("g").attr("class","x axis").attr("aria-hidden","true").attr("transform","translate(0,"+l+")"),j.append("text").attr("class","chart-label").attr("fill","#000").attr("x",m).attr("dy","-0.5em").attr("text-anchor","end").text(c.x.label)),j.call(d3.axisBottom(e).ticks(c.x.ticks).tickFormat(c.x.getTickText?c.x.getTickText.bind(c):null)),k.empty()&&(k=n.append("g").attr("class","y axis").attr("aria-hidden","true"),k.append("text").attr("class","chart-label").attr("fill","#000").attr("y","0").attr("transform","rotate(-90)").attr("dy","1.5em").attr("text-anchor","end").text(c.y.label)),k.call(d3.axisLeft(f).ticks(c.y.ticks))},r=function(){var a,b,d,e,f,g,h=this.settings,i=h.filterData&&"function"==typeof h.filterData?h.filterData(h.data,"table"):h.data,j=c.select(function(){return this.parentNode}),k=j.select("details"),l=h.z.getKeys.call(h,i),m=h.z.getDataPoints.call(h,i[l[0]]);if(k.empty()){for(k=j.append("details").attr("class","chart-data-table"),k.append("summary").attr("id","chrt-dt-tbl").text(h.datatable.title||"Data"),a=k.append("table").attr("class","table"),b=a.append("thead").append("tr"),d=a.append("tbody"),b.append("td"),g=0;g<m.length;g++)b.append("th").datum(m[g]).text((h.x.getText||h.x.getValue).bind(h));for(e=d.selectAll("tr").data(i),f=e.enter().append("tr"),f.append("th").text((h.z.getText||h.z.getValue).bind(h)),g=0;g<m.length;g++)f.append("td").datum(function(a){return h.z.getDataPoints.call(h,a)[g]}).text((h.y.getText?h.y.getText:h.y.getValue).bind(h));$&&$(".chart-data-table summary").trigger("wb-init.wb-details")}};return g={settings:i,x:e,y:f,svg:c},c.attr("viewBox","0 0 "+j+" "+k).attr("preserveAspectRatio","xMidYMid meet").attr("role","img").attr("aria-label",i.altText),n.empty()&&(n=c.append("g").attr("transform","translate("+i.margin.left+","+i.margin.top+")")),h=function(){q.apply(g),!1!==i.datatable&&(r.apply(g),d3.stcExt.addIEShim(c,k,j))},i.data?h():d3.json(i.url,function(a,b){i.data=b,h()}),g}}(jQuery.extend);
//# sourceMappingURL=line.min.js.map