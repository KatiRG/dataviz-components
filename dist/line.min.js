!function(a){var b={margin:{top:0,right:0,bottom:30,left:50},aspectRatio:16/9,x:{ticks:5},y:{ticks:10},width:600};this.lineChart=function(c,d){var e,f=a(!0,{},b,d),g=f.width,h=Math.ceil(g/f.aspectRatio),i=f.innerHeight=h-f.margin.top-f.margin.bottom,j=f.innerWidth=g-f.margin.left-f.margin.right,k=d3.scaleTime().range([0,j]),l=d3.scaleLinear().range([i,0]),m=d3.axisBottom(k).ticks(f.x.ticks),n=d3.axisLeft(l).ticks(f.y.ticks),o=c.select("g"),p=d3.line().x(function(a){return k(f.x.getValue.call(f,a))}).y(function(a){return l(f.y.getValue.call(f,a))}),q=d3.transition().duration(1e3),r=function(){var a,b,c=this.settings,e=c.filterData&&"function"==typeof c.filterData?c.filterData.call(c,c.data):c.data,g=c.showLabels||e.length>1,h=o.select(".x.axis"),r=o.select(".y.axis"),s=o.select(".data"),t=j-6,u=function(a){return l(f.y.getValue.call(c,a))},v=function(a,b){var d="dline dline"+(b+1);return c.z&&c.z.getClass&&"function"==typeof c.z.getClass&&(d+=" "+c.z.getClass.call(c,a)),d},w=function(a){return p(c.z.getDataPoints.call(c,a))},x=[].concat.apply([],e.map(function(a){return c.z.getDataPoints.call(c,a)}));k.domain(d3.extent(x,c.x.getValue.bind(c))),l.domain([0,d3.max(x,c.y.getValue.bind(c))]),s.empty()&&(s=o.append("g").attr("class","data")),a=s.selectAll(".line").data(e),a.enter().append("path").attr("class",v).attr("fill","none").attr("d",w),a.transition(q).attr("d",w),g&&(b=s.selectAll(".label"),b.data(e).enter().append("text").text(c.z.getText.bind(c)).datum(function(a){var b=c.z.getDataPoints.call(c,a);return b[b.length-1]}).attr("aria-hidden","true").attr("class","label").attr("fill","#000").attr("x",t).attr("y",u).attr("dy","1em").attr("text-anchor","end"),b.transition(q).attr("y",u)),h.empty()&&(h=o.append("g").attr("class","x axis").attr("aria-hidden","true").attr("transform","translate(0,"+i+")")),h.call(m).append("text").attr("class","chart-label").attr("fill","#000").attr("x",j).attr("dy","-0.5em").attr("text-anchor","end").text(d.x.label),r.empty()&&(r=o.append("g").attr("class","y axis").attr("aria-hidden","true")),r.call(n).append("text").attr("class","chart-label").attr("fill","#000").attr("y","0").attr("transform","rotate(-90)").attr("dy","1.5em").attr("text-anchor","end").text(d.y.label)},s=function(){var a,b,d,e,f,g,h=this.settings,i=h.filterData&&"function"==typeof h.filterData?h.filterData(h.data,"table"):h.data,j=c.select(function(){return this.parentNode}),k=j.select("details"),l=h.z.getKeys.call(h,i),m=h.z.getDataPoints.call(h,i[l[0]]);if(k.empty()){for(k=j.append("details").attr("class","chart-data-table"),k.append("summary").attr("id","chrt-dt-tbl").text(h.datatableTitle),a=k.append("table").attr("class","table"),b=a.append("thead").append("tr"),d=a.append("tbody"),b.append("td"),g=0;g<m.length;g++)b.append("th").datum(m[g]).text((h.x.getText||h.x.getValue).bind(h));for(e=d.selectAll("tr").data(i),f=e.enter().append("tr"),f.append("th").text((h.z.getText||h.z.getValue).bind(h)),g=0;g<m.length;g++)f.append("td").datum(function(a){return h.z.getDataPoints.call(h,a)[g]}).text((h.y.getText?h.y.getText:h.y.getValue).bind(h));$&&$(".chart-data-table summary").trigger("wb-init.wb-details")}};return e={settings:f,svg:c},c.attr("viewBox","0 0 "+g+" "+h).attr("preserveAspectRatio","xMidYMid meet").attr("role","img").attr("aria-label",f.altText),o.empty()&&(o=c.append("g").attr("transform","translate("+f.margin.left+","+f.margin.top+")")),f.data?(r.apply(e),s.apply(e)):d3.json(f.url,function(a,b){f.data=b,r.apply(e),s.apply(e)}),e}}(jQuery.extend);
//# sourceMappingURL=line.min.js.map