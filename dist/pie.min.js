!function(a){var b={margin:{top:2,right:2,bottom:2,left:2},innerRadius:0,padding:8e-4,aspectRatio:16/9,width:600};this.pieChart=function(c,d,e){var f,g,h=a(!0,{},b,d),i=h.width,j=Math.ceil(i/h.aspectRatio),k=h.innerHeight=j-h.margin.top-h.margin.bottom,l=h.innerWidth=i-h.margin.left-h.margin.right,m=c.select("g"),n=m.select(".data"),o=function(a){return(a||d3.transition()).duration(1e3)},p=function(){var a,b=this.settings,d=b.filterData&&"function"==typeof b.filterData?b.filterData.call(b,e):e,f=Math.min(k,l)/2,g=b.innerRadius/2,h=function(a){return a.startAngle},i=function(a){return a.endAngle},j=function(a){return a.padAngle},p=d3.arc().startAngle(h).endAngle(i).padAngle(j).innerRadius(g).outerRadius(f),q="function"==typeof b.padding?b.padding.bind(b):b.padding||0,r=b.getValue?b.getValue.bind(b):null,s=b.getId?b.getId.bind(b):null,t=b.getText?b.getText.bind(b):null,u=function(){d3.select(this).select("textPath").text(x)},v=function(a,c){var d="arc arc"+(c+1);return b.getClass&&"function"==typeof b.getClass&&(d+=" "+b.getClass.call(b,a)),d},w=function(a){var b,c=this.parentNode._current,d=a;return b=d3.interpolate(c,d),this.parentNode._current=d,function(c){var d=b(c);return d.parent=a.parent,p(d)}},x=function(a,b,c){var d=c[0],e=d3.select(d.parentNode).append("tspan"),g=t.call(this,a.data,b,c),j=function(){var b,c,d,j,k,l;if(b=(i(a)-h(a))/(2*Math.PI),c=2*b*Math.PI*f-10,!g||g.length<1||c<=0)return null;if(e.text("..."),d=e.node().getComputedTextLength(),e.text(g),(j=e.node().getComputedTextLength())<c)return g;if(3*d>c)return null;for(l=j/c,k=Math.ceil(1*g.length/l);e.node().getSubStringLength(0,k)+d>c;)k--;return g.substr(0,k)+"..."}();return e.remove(),j},y=d3.pie().value(r).padAngle(q);n.empty()&&(n=m.append("g").attr("class","data").attr("transform","translate("+l/2+","+k/2+")")),a=n.selectAll(".arc").data(y(d),s),a.enter().append("g").attr("id",s).attr("class",v).each(function(a,b){var d=d3.select(this),e=function(){return c.attr("id")+"arc"+b};this._current=a,d.append("path").attr("id",e).attr("d",p),d.append("text").attr("dy",15).attr("dx",5).attr("aria-hidden","true").append("textPath").attr("xlink:href",function(){return"#"+e.apply(this,arguments)}).text(x)}),a.attr("class",v).transition().each(function(){var a=o(d3.select(this).transition());a.select("text textPath").text(null),a.select("path").attrTween("d",w),a.on("end",u)})};return f={settings:h,svg:c},c.attr("viewBox","0 0 "+i+" "+j).attr("preserveAspectRatio","xMidYMid meet").attr("role","img").attr("aria-label",h.altText),m.empty()&&(m=c.append("g").attr("transform","translate("+h.margin.left+","+h.margin.top+")")),g=function(){p.apply(f),!1!==h.datatable&&d3.stcExt.addIEShim(c,j,i)},void 0===e?d3.json(h.url,function(a,b){e=b,g()}):g(),f}}(jQuery.extend,jQuery);
//# sourceMappingURL=pie.min.js.map