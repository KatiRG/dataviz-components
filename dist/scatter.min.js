!function(){var a={margin:{top:10,right:10,bottom:30,left:50},aspectRatio:16/9,x:{ticks:5},y:{ticks:10},showLabels:!1,pointRadius:5,width:600};this.scatterChart=function(b,c){var d,e=$.extend({},a,c),f=e.width,g=Math.ceil(f/e.aspectRatio),h=e.innerHeight=g-e.margin.top-e.margin.bottom,i=e.innerWidth=f-e.margin.left-e.margin.right,j=d3.scaleLinear().range([0,i]),k=d3.scaleLinear().range([h,0]),l=d3.axisBottom(j).ticks(e.x.ticks),m=d3.axisLeft(k).ticks(e.y.ticks),n=b.select("g"),o=d3.transition().duration(1e3).ease(d3.easeLinear),p=function(a){var b,c,d,f=function(a,b){return a-b};return b=a.map(function(a){return e.x.getValue(a)}).sort(f),c=a.map(function(a){return e.y.getValue(a)}).sort(f),d=Math.floor(.05*a.length),{x:{min:b[d],max:b[b.length-d]},y:{min:c[d],max:c[c.length-d]}}},q=function(){var a,d,e,f,g,q=this.settings,r=q.filterData&&"function"==typeof q.filterData?q.filterData(q.data,"chart"):q.data,s=n.select(".x.axis"),t=n.select(".y.axis"),u=b.select("#data"),v=1+q.pointRadius/h,w=q.displayOnly&&"function"==typeof q.displayOnly?q.displayOnly(r):null,x=function(a,b){var c="point point"+(b+1);return q.z&&q.z.getClass&&"function"==typeof q.z.getClass&&(c+=" "+q.z.getClass(a)),w&&-1===w.indexOf(a)||(c+=" visible"),c},y=function(a,b){var c="label label"+(b+1);return w&&-1===w.indexOf(a)||(c+=" visible"),c},z=function(a){if(q.z&&q.z.getId&&"function"==typeof q.z.getId)return q.z.getId(a)},A=function(a){return j(q.x.getValue(a))},B=function(a){return k(q.y.getValue(a))},C=function(a,b,c){var d=c[b].getBBox(),e=A(a)+q.pointRadius;return e+d.width>i&&(e-=d.width+2*q.pointRadius),e},D=function(a){var b=B(a)-q.pointRadius;return b<0&&(b=2*+q.pointRadius),b};q.filterOutliars?(e=p(r),a=[e.x.min,e.x.max],d=[e.y.min,e.y.max]):w?(a=d3.extent(w,q.x.getValue),d=d3.extent(w,q.y.getValue)):(a=d3.extent(r,q.x.getValue),d=d3.extent(r,q.y.getValue)),a[0]-=v,d[0]-=v,a[1]+=v,d[1]+=v,j.domain(a),k.domain(d),u.empty()&&(u=n.append("g").attr("id","data")),f=u.selectAll(".point").data(r),f.enter().append("circle").attr("r",q.pointRadius).attr("id",z).attr("class",x).attr("cx",A).attr("cy",B),f.transition(o).attr("class",x).attr("cx",A).attr("cy",B),f.exit().remove(),g=u.selectAll(".label"),q.showLabels?(g.data(r).enter().append("text").text(q.z.getText).attr("aria-hidden","true").attr("class",y).attr("fill","#000").attr("x",C).attr("y",D),g.transition(o).text(q.z.getText).attr("class",y).attr("x",C).attr("y",D),g.exit().remove()):g.remove(),s.empty()&&(s=n.append("g").attr("class","x axis").attr("aria-hidden","true").attr("transform","translate(0,"+h+")")),s.call(l).append("text").attr("class","chart-label").attr("fill","#000").attr("x",i).attr("dy","-0.5em").attr("text-anchor","end").text(c.x.label),t.empty()&&(t=n.append("g").attr("class","y axis").attr("aria-hidden","true")),t.call(m).append("text").attr("class","chart-label").attr("fill","#000").attr("y","0").attr("transform","rotate(-90)").attr("dy","1.5em").attr("text-anchor","end").text(c.y.label)},r=function(){var a,d,e,f,g,h=this.settings,i=h.filterData&&"function"==typeof h.filterData?h.filterData(h.data,"table"):h.data,j=b.select(function(){return this.parentNode}),k=j.select("details");k.empty()&&(k=j.append("details").attr("class","chart-data-table"),k.append("summary").attr("id","chrt-dt-tbl").text(c.datatableTitle),a=k.append("table").attr("class","table"),d=a.append("thead").append("tr"),e=a.append("tbody"),d.append("th").text(c.z.label),d.append("th").text(c.x.label),d.append("th").text(c.y.label),f=e.selectAll("tr").data(i),g=f.enter().append("tr"),g.append("th").text(c.z.getText),g.append("td").text(c.x.getText||c.x.getValue),g.append("td").text(c.y.getText||c.y.getValue),$&&$(".chart-data-table summary").trigger("wb-init.wb-details"))};return d={settings:e,svg:b},b.attr("viewBox","0 0 "+f+" "+g).attr("preserveAspectRatio","xMidYMid meet").attr("role","img").attr("aria-label",e.altText),n.empty()&&(n=b.append("g").attr("transform","translate("+e.margin.left+","+e.margin.top+")")),e.data?(q.apply(d),r.apply(d)):d3.json(e.url,function(a,b){e.data=b,q.apply(d),r.apply(d)}),d}}();
//# sourceMappingURL=scatter.min.js.map