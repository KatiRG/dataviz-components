!function(a){var b={margin:{top:2,right:2,bottom:2,left:2},arcsWidth:20,padding:.03,aspectRatio:16/9,width:600};this.chordChart=function(c,d){var e,f,g=a(!0,{},b,d),h=g.width,i=Math.ceil(h/g.aspectRatio),j=g.innerHeight=i-g.margin.top-g.margin.bottom,k=g.innerWidth=h-g.margin.left-g.margin.right,l=c.select("g"),m=l.select(".data"),n=function(){var a,b,d=this.settings,e=d.filterData&&"function"==typeof d.filterData?d.filterData.call(d,d.data):d.data,f=Math.min(j,k)/2,g=f-d.arcsWidth,h=d.arcs&&d.arcs.getClass?d.arcs.getClass.bind(d):null,i=d.arcs&&d.arcs.getText?d.arcs.getText.bind(d):null,n=d.ribbons?d.ribbons.getClass.bind(d):null,o=d3.chord().padAngle(d.padding),p=d3.arc().innerRadius(g).outerRadius(f),q=d3.ribbon().radius(g);d.startAngle&&(p.startAngle(d.startAngle.bind(d)),q.startAngle(d.startAngle.bind(d))),d.endAngle&&(p.endAngle(d.endAngle.bind(d)),q.endAngle(d.endAngle.bind(d))),m.empty()&&(m=l.append("g").attr("class","data").attr("transform","translate("+k/2+","+j/2+")")),m.datum(function(a){var b,c,d,e,f=o(a.matrix);for(b=0;b<f.groups.length;b++)c=f.groups[b],c.index=a.indexes[c.index];for(d=0;d<f.length;d++)e=f[d],e.source.index=a.indexes[e.source.index],e.source.subIndex=a.indexes[e.source.subIndex],e.target.index=a.indexes[e.target.index],e.target.subIndex=a.indexes[e.target.subIndex];return f}(d.getMatrix.call(d,e))),a=m.append("g").attr("class","arcs").selectAll("g").data(function(a){return a.groups}),a.enter().append("g").attr("class",h).each(function(a,b){var d=d3.select(this),e=function(){return c.attr("id")+"arc"+b};d.append("path").attr("d",p).attr("id",e),d.append("text").attr("dy",15).attr("dx",5).append("textPath").attr("href",function(){return"#"+e.apply(this,arguments)}).text(i)}),b=m.append("g").attr("class","ribbons").selectAll("g").data(function(a){return a}),b.enter().append("g").attr("class",n).each(function(){d3.select(this).append("path").attr("d",q)})};return e={settings:g,svg:c},c.attr("viewBox","0 0 "+h+" "+i).attr("preserveAspectRatio","xMidYMid meet").attr("role","img").attr("aria-label",g.altText),l.empty()&&(l=c.append("g").attr("transform","translate("+g.margin.left+","+g.margin.top+")")),f=function(){n.apply(e),!1!==g.datatable&&d3.stcExt.addIEShim(c,i,h)},g.data?f():d3.json(g.url,function(a,b){g.data=b,f()}),e}}(jQuery.extend,jQuery);
//# sourceMappingURL=chord.min.js.map