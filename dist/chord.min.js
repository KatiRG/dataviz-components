!function(a){var b={margin:{top:2,right:2,bottom:2,left:2},arcsWidth:20,padding:.03,aspectRatio:16/9,width:600};this.chordChart=function(c,d){var e,f,g=a(!0,{},b,d),h=g.width,i=Math.ceil(h/g.aspectRatio),j=g.innerHeight=i-g.margin.top-g.margin.bottom,k=g.innerWidth=h-g.margin.left-g.margin.right,l=c.select("g"),m=l.select(".data"),n=function(){var a,b,c=this.settings,d=c.filterData&&"function"==typeof c.filterData?c.filterData.call(c,c.data):c.data,e=Math.min(j,k)/2,f=e-c.arcsWidth,g=c.arcs&&c.arcs.getClass?c.arcs.getClass.bind(c):null,h=c.arcs&&c.arcs.getText?c.arcs.getText.bind(c):null,i=c.ribbons?c.ribbons.getClass.bind(c):null,n=d3.chord().padAngle(c.padding),o=d3.arc().innerRadius(f).outerRadius(e),p=d3.ribbon().radius(f);c.startAngle&&(o.startAngle(c.startAngle.bind(c)),p.startAngle(c.startAngle.bind(c))),c.endAngle&&(o.endAngle(c.endAngle.bind(c)),p.endAngle(c.endAngle.bind(c))),m.empty()&&(m=l.append("g").attr("class","data").attr("transform","translate("+k/2+","+j/2+")")),m.datum(function(a){var b,c,d,e,f=n(a.matrix);for(b=0;b<f.groups.length;b++)c=f.groups[b],c.index=a.indexes[c.index];for(d=0;d<f.length;d++)e=f[d],e.source.index=a.indexes[e.source.index],e.source.subIndex=a.indexes[e.source.subIndex],e.target.index=a.indexes[e.target.index],e.target.subIndex=a.indexes[e.target.subIndex];return f}(c.getMatrix.call(c,d))),a=m.append("g").attr("class","arcs").selectAll("g").data(function(a){return a.groups}),a.enter().append("g").attr("class",g).each(function(a,b){var c=d3.select(this),d=function(){return"arc"+b};c.append("path").attr("d",o).attr("id",d),c.append("text").attr("dy",15).attr("dx",5).append("textPath").attr("href",function(){return"#"+d.apply(this,arguments)}).text(h)}),b=m.append("g").attr("class","ribbons").selectAll("g").data(function(a){return a}),b.enter().append("g").attr("class",i).each(function(){d3.select(this).append("path").attr("d",p)})};return e={settings:g,svg:c},c.attr("viewBox","0 0 "+h+" "+i).attr("preserveAspectRatio","xMidYMid meet").attr("role","img").attr("aria-label",g.altText),l.empty()&&(l=c.append("g").attr("transform","translate("+g.margin.left+","+g.margin.top+")")),f=function(){n.apply(e),!1!==g.datatable&&d3.stcExt.addIEShim(c,i,h)},g.data?f():d3.json(g.url,function(a,b){g.data=b,f()}),e}}(jQuery.extend,jQuery);
//# sourceMappingURL=chord.min.js.map