!function(a){var b={margin:{top:18,right:10,bottom:30,left:50},x:{getDomain:function(a){var b,c,d,e=this,f=[];for(b=0;b<a.length;b++)c=a[b],d=e.x.getValue.call(e,c),-1===f.indexOf(d)&&f.push(d);return f}},y:{getDomain:function(a){return[0,d3.max(a,this.y.getValue.bind(this))*(!1===this.showValue?1:1.05)]}},z:{getDomain:function(a){var b,c,d,e=this,f=[];for(b=0;b<a.length;b++)c=a[b],d=e.z.getId.call(e,c),-1===f.indexOf(d)&&f.push(d);return f}},groupPadding:.2,barPadding:.1,aspectRatio:16/9,width:600};this.barChart=function(c,d,e){var f,g,h,i,j,k=a(!0,{},b,d),l=k.width,m=Math.ceil(l/k.aspectRatio),n=k.innerHeight=m-k.margin.top-k.margin.bottom,o=k.innerWidth=l-k.margin.left-k.margin.right,p=c.select("g"),q=p.select(".data"),r=d3.transition().duration(1e3),s=function(){var a,b=this.settings,c=b.filterData&&"function"==typeof b.filterData?b.filterData.call(b,e):e,j=[].concat.apply([],c.map(function(a){return b.z.getDataPoints.call(b,a)})),k=p.select(".x.axis"),l=p.select(".y.axis"),m=b.showValues,s=function(a,c){var d="bar-group bar-group"+(c+1);return b.x&&b.x.getClass&&"function"==typeof b.x.getClass&&(d+=" "+b.x.getClass.call(b,a)),d},t=function(){return"translate("+f(b.x.getValue.apply(this,arguments))+",0)"},u=function(a,c){var d="bar bar"+(c+1);return b.x&&b.z.getClass&&"function"==typeof b.z.getClass&&(d+=" "+b.z.getClass.call(b,a)),d},v=function(){var a=d3.select(this),c=b.z.getDataPoints.call(b,a.datum()),d=a.selectAll(".bar").data(c,b.z.getId.bind(b)),e=a.selectAll(".value").data(function(){return"function"==typeof m?c.filter(m.bind(b)):!0!==m?[]:c.filter(function(a){return b.y.getValue.call(b,a)>0})},b.z.getId.bind(b));d.enter().append("rect").attr("x",w).attr("y",n).transition(r).attr("y",x).attr("width",g.bandwidth()).attr("height",y.bind(b)).attr("class",u.bind(b)),d.transition(r).attr("x",w).attr("y",x).attr("width",g.bandwidth()).attr("height",y.bind(b)).attr("class",u.bind(b)),d.exit().remove(),e.enter().append("text").attr("x",function(){return w.apply(this,arguments)+g.bandwidth()/2}).attr("aria-hidden","true").attr("y",x).attr("dy","-0.5em").attr("text-anchor","middle").attr("class","value").text(b.y.getText.bind(b)),e.transition(r).attr("x",w).attr("y",x).text(b.y.getText.bind(b)),e.exit().remove()},w=function(){return g(b.z.getId.apply(this,arguments))},x=function(a){return h(b.y.getValue.call(b,a))},y=function(){return n-x.apply(this,arguments)};f=i.x0=d3.scaleBand().paddingInner(b.groupPadding),g=i.x1=d3.scaleBand().padding(b.barPadding),h=i.y=d3.scaleLinear().rangeRound([n,0]),f.domain(b.x.getDomain.call(b,c)).rangeRound([0,o]),g.domain(b.z.getDomain.call(b,j)).rangeRound([0,f.bandwidth()]),h.domain(b.y.getDomain.call(b,j)),q.empty()&&(q=p.append("g").attr("class","data")),a=q.selectAll(".bar-group").data(c),a.enter().append("g").attr("class",s).attr("transform",t).each(v),a.transition(r).attr("transform",t).each(v),a.exit().remove(),k.empty()?(k=p.append("g").attr("class","x axis").attr("aria-hidden","true").attr("transform","translate(0,"+n+")"),k.append("text").attr("class","chart-label").attr("fill","#000").attr("x",o).attr("dy","-0.5em").attr("text-anchor","end").text(b.x.label)):k.select("text").text(d.x.label),k.call(d3.axisBottom(f).ticks(b.x.ticks).tickFormat(b.x.getTickText?b.x.getTickText.bind(b):null)),l.empty()?(l=p.append("g").attr("class","y axis").attr("aria-hidden","true"),l.append("text").attr("class","chart-label").attr("fill","#000").attr("y","0").attr("dy","-0.5em").attr("text-anchor","start").text(b.y.label)):l.select("text").text(d.y.label),l.call(d3.axisLeft(h).ticks(b.y.ticks).tickFormat(b.y.getTickText?b.y.getTickText.bind(b):null))},t=function(){},u=function(){q.remove()};return i={settings:k,clear:u,svg:c},c.attr("viewBox","0 0 "+l+" "+m).attr("preserveAspectRatio","xMidYMid meet").attr("role","img").attr("aria-label",k.altText),p.empty()&&(p=c.append("g").attr("transform","translate("+k.margin.left+","+k.margin.top+")")),j=function(){s.apply(i),!1!==k.datatable&&(t.apply(i),d3.stcExt.addIEShim(c,m,l))},void 0===e?d3.json(k.url,function(a,b){e=b,j()}):j(),i}}(jQuery.extend,jQuery);
//# sourceMappingURL=bar.min.js.map